<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Talent Ranker">
  <title>Podcast Talent Ranker</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-purple-50 to-blue-50">
  <div id="app"></div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <script>
    const { createElement: h, useState, useEffect, useMemo } = React;
    
    const PlusIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
      h('line', { x1: 12, y1: 5, x2: 12, y2: 19 }),
      h('line', { x1: 5, y1: 12, x2: 19, y2: 12 })
    );
    
    const TrashIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
      h('polyline', { points: '3 6 5 6 21 6' }),
      h('path', { d: 'M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2' })
    );
    
    const UsersIcon = () => h('svg', { width: 16, height: 16, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
      h('path', { d: 'M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2' }),
      h('circle', { cx: 9, cy: 7, r: 4 }),
      h('path', { d: 'M23 21v-2a4 4 0 0 0-3-3.87' }),
      h('path', { d: 'M16 3.13a4 4 0 0 1 0 7.75' })
    );
    
    const AwardIcon = () => h('svg', { width: 24, height: 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
      h('circle', { cx: 12, cy: 8, r: 7 }),
      h('polyline', { points: '8.21 13.89 7 23 12 20 17 23 15.79 13.88' })
    );

    const App = () => {
      const [talents, setTalents] = useState([]);
      const [weights, setWeights] = useState({
        engagement: 25,
        contentQuality: 20,
        growthPotential: 20,
        productionValue: 15,
        brandFit: 20
      });
      const [showAddForm, setShowAddForm] = useState(false);
      const [newTalent, setNewTalent] = useState({
        name: '',
        showName: '',
        audienceSize: '',
        niche: '',
        engagement: 5,
        contentQuality: 5,
        growthPotential: 5,
        productionValue: 5,
        brandFit: 5,
        notes: ''
      });
      const [sortBy, setSortBy] = useState('score');

      useEffect(() => {
        const savedTalents = localStorage.getItem('podcastTalents');
        const savedWeights = localStorage.getItem('podcastWeights');
        
        if (savedTalents) {
          try {
            setTalents(JSON.parse(savedTalents));
          } catch (e) {
            console.error('Error loading talents', e);
          }
        } else {
          setTalents([{
            id: 1,
            name: "Sarah Johnson",
            showName: "Tech Talk Daily",
            audienceSize: "150K",
            niche: "Technology",
            engagement: 8,
            contentQuality: 9,
            growthPotential: 7,
            productionValue: 8,
            brandFit: 9,
            notes: "Strong technical content, loyal audience"
          }]);
        }
        
        if (savedWeights) {
          try {
            setWeights(JSON.parse(savedWeights));
          } catch (e) {
            console.error('Error loading weights', e);
          }
        }
      }, []);

      useEffect(() => {
        try {
          localStorage.setItem('podcastTalents', JSON.stringify(talents));
        } catch (e) {
          console.error('Error saving talents', e);
        }
      }, [talents]);

      useEffect(() => {
        try {
          localStorage.setItem('podcastWeights', JSON.stringify(weights));
        } catch (e) {
          console.error('Error saving weights', e);
        }
      }, [weights]);

      const calculateScore = (talent) => {
        return (
          (talent.engagement * weights.engagement +
           talent.contentQuality * weights.contentQuality +
           talent.growthPotential * weights.growthPotential +
           talent.productionValue * weights.productionValue +
           talent.brandFit * weights.brandFit) / 100
        ).toFixed(2);
      };

      const sortedTalents = useMemo(() => {
        const sorted = talents.map(t => {
          const copy = {};
          for (let key in t) {
            copy[key] = t[key];
          }
          copy.score = parseFloat(calculateScore(t));
          return copy;
        });

        sorted.sort((a, b) => {
          if (sortBy === 'score') return b.score - a.score;
          if (sortBy === 'name') return a.name.localeCompare(b.name);
          if (sortBy === 'niche') return a.niche.localeCompare(b.niche);
          return 0;
        });

        return sorted;
      }, [talents, weights, sortBy]);

      const addTalent = () => {
        if (newTalent.name && newTalent.showName) {
          const talentToAdd = {};
          for (let key in newTalent) {
            talentToAdd[key] = newTalent[key];
          }
          talentToAdd.id = Date.now();
          
          const updatedTalents = talents.slice();
          updatedTalents.push(talentToAdd);
          setTalents(updatedTalents);
          
          setNewTalent({
            name: '',
            showName: '',
            audienceSize: '',
            niche: '',
            engagement: 5,
            contentQuality: 5,
            growthPotential: 5,
            productionValue: 5,
            brandFit: 5,
            notes: ''
          });
          setShowAddForm(false);
        }
      };

      const deleteTalent = (id) => {
        if (confirm('Are you sure you want to delete this talent?')) {
          setTalents(talents.filter(t => t.id !== id));
        }
      };

      const updateWeight = (key, value) => {
        const newWeights = {};
        for (let k in weights) {
          newWeights[k] = weights[k];
        }
        newWeights[key] = value;
        setWeights(newWeights);
      };

      const updateNewTalent = (field, value) => {
        const updated = {};
        for (let key in newTalent) {
          updated[key] = newTalent[key];
        }
        updated[field] = value;
        setNewTalent(updated);
      };

      const getScoreColor = (score) => {
        if (score >= 8) return 'text-green-600 bg-green-50';
        if (score >= 6) return 'text-yellow-600 bg-yellow-50';
        return 'text-red-600 bg-red-50';
      };

      const getRankMedal = (index) => {
        if (index === 0) return 'ðŸ¥‡';
        if (index === 1) return 'ðŸ¥ˆ';
        if (index === 2) return 'ðŸ¥‰';
        return '#' + (index + 1);
      };

      return h('div', { className: 'min-h-screen p-4 md:p-6' },
        h('div', { className: 'max-w-7xl mx-auto' },
          h('div', { className: 'bg-white rounded-xl shadow-lg p-4 md:p-6 mb-6' },
            h('div', { className: 'flex items-center justify-between mb-6 flex-wrap gap-4' },
              h('div', null,
                h('h1', { className: 'text-2xl md:text-3xl font-bold text-gray-800 flex items-center gap-2' },
                  h(AwardIcon),
                  'Talent Ranker'
                ),
                h('p', { className: 'text-gray-600 mt-1 text-sm md:text-base' }, 'Evaluate and rank podcast acquisitions')
              ),
              h('button', {
                onClick: () => setShowAddForm(!showAddForm),
                className: 'bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition flex items-center gap-2'
              },
                h(PlusIcon),
                'Add Talent'
              )
            ),

            h('div', { className: 'bg-gray-50 rounded-lg p-4 mb-6' },
              h('h3', { className: 'font-semibold text-gray-700 mb-3' }, 'Criteria Weights (%)'),
              h('div', { className: 'grid grid-cols-2 md:grid-cols-5 gap-4' },
                Object.keys(weights).map(key =>
                  h('div', { key: key },
                    h('label', { className: 'text-sm text-gray-600 capitalize block mb-1' },
                      key.replace(/([A-Z])/g, ' $1').trim()
                    ),
                    h('input', {
                      type: 'number',
                      min: '0',
                      max: '100',
                      value: weights[key],
                      onChange: (e) => updateWeight(key, parseInt(e.target.value) || 0),
                      className: 'w-full px-3 py-2 border rounded-lg'
                    })
                  )
                )
              ),
              h('div', { className: 'mt-2 text-sm text-gray-600' },
                'Total: ' + Object.values(weights).reduce((a, b) => a + b, 0) + '%',
                Object.values(weights).reduce((a, b) => a + b, 0) !== 100 &&
                  h('span', { className: 'text-red-600 ml-2' }, 'âš  Should equal 100%')
              )
            ),

            showAddForm && h('div', { className: 'bg-blue-50 rounded-lg p-4 mb-6' },
              h('h3', { className: 'font-semibold text-gray-700 mb-3' }, 'Add New Talent'),
              h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4 mb-4' },
                h('input', {
                  type: 'text',
                  placeholder: 'Name',
                  value: newTalent.name,
                  onChange: (e) => updateNewTalent('name', e.target.value),
                  className: 'px-3 py-2 border rounded-lg'
                }),
                h('input', {
                  type: 'text',
                  placeholder: 'Show Name',
                  value: newTalent.showName,
                  onChange: (e) => updateNewTalent('showName', e.target.value),
                  className: 'px-3 py-2 border rounded-lg'
                }),
                h('input', {
                  type: 'text',
                  placeholder: 'Audience Size (e.g., 50K)',
                  value: newTalent.audienceSize,
                  onChange: (e) => updateNewTalent('audienceSize', e.target.value),
                  className: 'px-3 py-2 border rounded-lg'
                }),
                h('input', {
                  type: 'text',
                  placeholder: 'Niche',
                  value: newTalent.niche,
                  onChange: (e) => updateNewTalent('niche', e.target.value),
                  className: 'px-3 py-2 border rounded-lg'
                })
              ),
              h('div', { className: 'grid grid-cols-2 md:grid-cols-5 gap-4 mb-4' },
                ['engagement', 'contentQuality', 'growthPotential', 'productionValue', 'brandFit'].map(field =>
                  h('div', { key: field },
                    h('label', { className: 'text-sm text-gray-600 capitalize block mb-1' },
                      field.replace(/([A-Z])/g, ' $1').trim() + ' (1-10)'
                    ),
                    h('input', {
                      type: 'number',
                      min: '1',
                      max: '10',
                      value: newTalent[field],
                      onChange: (e) => updateNewTalent(field, parseInt(e.target.value) || 1),
                      className: 'w-full px-3 py-2 border rounded-lg'
                    })
                  )
                )
              ),
              h('textarea', {
                placeholder: 'Notes',
                value: newTalent.notes,
                onChange: (e) => updateNewTalent('notes', e.target.value),
                className: 'w-full px-3 py-2 border rounded-lg mb-4',
                rows: '2'
              }),
              h('div', { className: 'flex gap-2' },
                h('button', {
                  onClick: addTalent,
                  className: 'bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition'
                }, 'Add Talent'),
                h('button', {
                  onClick: () => setShowAddForm(false),
                  className: 'bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition'
                }, 'Cancel')
              )
            ),

            h('div', { className: 'flex items-center gap-4' },
              h('span', { className: 'text-gray-700 font-medium' }, 'Sort by:'),
              h('select', {
                value: sortBy,
                onChange: (e) => setSortBy(e.target.value),
                className: 'px-3 py-2 border rounded-lg'
              },
                h('option', { value: 'score' }, 'Score (Highest First)'),
                h('option', { value: 'name' }, 'Name (A-Z)'),
                h('option', { value: 'niche' }, 'Niche')
              )
            )
          ),

          h('div', { className: 'space-y-4' },
            sortedTalents.map((talent, index) =>
              h('div', { key: talent.id, className: 'bg-white rounded-xl shadow-lg p-4 md:p-6 hover:shadow-xl transition' },
                h('div', { className: 'flex items-start justify-between mb-4 gap-4' },
                  h('div', { className: 'flex items-start gap-2 md:gap-4 flex-1' },
                    h('div', { className: 'text-xl md:text-2xl font-bold text-gray-400 min-w-[50px]' },
                      getRankMedal(index)
                    ),
                    h('div', { className: 'flex-1 min-w-0' },
                      h('div', { className: 'flex items-center gap-2 md:gap-3 mb-2 flex-wrap' },
                        h('h2', { className: 'text-lg md:text-xl font-bold text-gray-800 truncate' }, talent.name),
                        h('span', { className: 'px-3 py-1 rounded-full text-sm font-semibold ' + getScoreColor(talent.score) },
                          'Score: ' + talent.score + '/10'
                        )
                      ),
                      h('div', { className: 'flex items-center gap-2 md:gap-4 text-sm md:text-base text-gray-600 mb-2 flex-wrap' },
                        h('span', { className: 'font-semibold truncate' }, talent.showName),
                        h('span', { className: 'flex items-center gap-1' },
                          h(UsersIcon),
                          talent.audienceSize
                        ),
                        h('span', { className: 'px-2 py-1 bg-purple-100 text-purple-700 rounded text-sm' },
                          talent.niche
                        )
                      ),
                      talent.notes && h('p', { className: 'text-gray-600 text-sm italic' }, talent.notes)
                    )
                  ),
                  h('button', {
                    onClick: () => deleteTalent(talent.id),
                    className: 'text-red-500 hover:text-red-700 transition flex-shrink-0'
                  }, h(TrashIcon))
                ),

                h('div', { className: 'grid grid-cols-2 md:grid-cols-5 gap-4' },
                  ['engagement', 'contentQuality', 'growthPotential', 'productionValue', 'brandFit'].map(field =>
                    h('div', { key: field },
                      h('div', { className: 'flex items-center justify-between mb-1' },
                        h('label', { className: 'text-xs text-gray-600 capitalize' },
                          field.replace(/([A-Z])/g, ' $1').trim()
                        ),
                        h('span', { className: 'text-xs font-semibold text-gray-700' }, talent[field] + '/10')
                      ),
                      h('div', { className: 'h-2 bg-gray-200 rounded-full overflow-hidden' },
                        h('div', {
                          className: 'h-full bg-purple-600 transition-all',
                          style: { width: (talent[field] / 10 * 100) + '%' }
                        })
                      )
                    )
                  )
                )
              )
            )
          ),

          talents.length === 0 && h('div', { className: 'bg-white rounded-xl shadow-lg p-12 text-center' },
            h('p', { className: 'text-gray-500 text-lg' }, 'No talent added yet. Click "Add Talent" to get started!')
          )
        )
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('app'));
    root.render(h(App));
  </script>
</body>
</html>
