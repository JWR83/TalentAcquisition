<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Talent Ranker">
  <title>Podcast Talent Ranker</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .card-hover {
      transition: all 0.3s ease;
      border: 2px solid transparent;
    }
    .card-hover:hover {
      transform: translateY(-4px);
      border-color: #0891b2;
      box-shadow: 0 20px 25px -5px rgba(8, 145, 178, 0.2), 0 10px 10px -5px rgba(8, 145, 178, 0.1);
    }
  </style>
</head>
<body class="bg-sky-50">
  <div id="app"></div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <script>
    const { createElement: h, useState, useEffect, useMemo } = React;
    
    const PlusIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
      h('line', { x1: 12, y1: 5, x2: 12, y2: 19 }),
      h('line', { x1: 5, y1: 12, x2: 19, y2: 12 })
    );
    
    const TrashIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
      h('polyline', { points: '3 6 5 6 21 6' }),
      h('path', { d: 'M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2' })
    );
    
    const UsersIcon = () => h('svg', { width: 16, height: 16, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
      h('path', { d: 'M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2' }),
      h('circle', { cx: 9, cy: 7, r: 4 }),
      h('path', { d: 'M23 21v-2a4 4 0 0 0-3-3.87' }),
      h('path', { d: 'M16 3.13a4 4 0 0 1 0 7.75' })
    );
    
    const AwardIcon = () => h('svg', { width: 24, height: 24, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
      h('circle', { cx: 12, cy: 8, r: 7 }),
      h('polyline', { points: '8.21 13.89 7 23 12 20 17 23 15.79 13.88' })
    );

    const SearchIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
      h('circle', { cx: 11, cy: 11, r: 8 }),
      h('path', { d: 'm21 21-4.35-4.35' })
    );

    const ExternalLinkIcon = () => h('svg', { width: 16, height: 16, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2, className: 'inline ml-1' },
      h('path', { d: 'M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6' }),
      h('polyline', { points: '15 3 21 3 21 9' }),
      h('line', { x1: 10, y1: 14, x2: 21, y2: 3 })
    );

    const YoutubeIcon = () => h('svg', { width: 20, height: 20, viewBox: '0 0 24 24', fill: 'currentColor' },
      h('path', { d: 'M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z' })
    );

    const DollarIcon = () => h('svg', { width: 16, height: 16, viewBox: '0 0 24 24', fill: 'none', stroke: 'currentColor', strokeWidth: 2 },
      h('line', { x1: 12, y1: 1, x2: 12, y2: 23 }),
      h('path', { d: 'M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6' })
    );

    const App = () => {
      const [talents, setTalents] = useState([]);
      const [weights, setWeights] = useState({
        engagement: 25,
        contentQuality: 20,
        growthPotential: 20,
        productionValue: 15,
        brandFit: 20
      });
      const [showAddForm, setShowAddForm] = useState(false);
      const [newTalent, setNewTalent] = useState({
        name: '',
        showName: '',
        audienceSize: '',
        niche: '',
        youtubeUrl: '',
        cpm: '',
        rpm: '',
        engagement: 5,
        contentQuality: 5,
        growthPotential: 5,
        productionValue: 5,
        brandFit: 5,
        notes: ''
      });
      const [sortBy, setSortBy] = useState('score');
      const [searchQuery, setSearchQuery] = useState('');
      const [revenueFilter, setRevenueFilter] = useState('all'); // all, high, medium, low

      const getDefaultTalents = () => [
            // Personal Finance & Investing
            {
              id: 1,
              name: "Ryan Scribner",
              showName: "Ryan Scribner",
              audienceSize: "862K",
              niche: "Personal Finance",
              youtubeUrl: "https://www.youtube.com/@RyanScribner",
              cpm: "$8.50",
              rpm: "$6.20",
              engagement: 8,
              contentQuality: 8,
              growthPotential: 7,
              productionValue: 7,
              brandFit: 8,
              notes: "Strong finance content creator"
            },
            {
              id: 2,
              name: "Nischa",
              showName: "Nischa",
              audienceSize: "2.06M",
              niche: "Personal Finance",
              youtubeUrl: "https://www.youtube.com/@nischa",
              cpm: "$12.30",
              rpm: "$9.80",
              engagement: 9,
              contentQuality: 8,
              growthPotential: 7,
              productionValue: 8,
              brandFit: 9,
              notes: "Popular finance channel"
            },
            {
              id: 3,
              name: "Nate O'Brien",
              showName: "Nate O'Brien",
              audienceSize: "1.29M",
              niche: "Personal Finance",
              youtubeUrl: "https://www.youtube.com/@NateOBrien",
              cpm: "$10.50",
              rpm: "$8.40",
              engagement: 9,
              contentQuality: 9,
              growthPotential: 7,
              productionValue: 8,
              brandFit: 9,
              notes: "Top finance YouTuber"
            },
            {
              id: 4,
              name: "WhiteBoard Finance",
              showName: "WhiteBoard Finance",
              audienceSize: "1.02M",
              niche: "Personal Finance",
              youtubeUrl: "https://www.youtube.com/@WhiteBoardFinance",
              cpm: "$9.20",
              rpm: "$7.10",
              engagement: 8,
              contentQuality: 8,
              growthPotential: 7,
              productionValue: 7,
              brandFit: 8,
              notes: "Educational finance content"
            },
            {
              id: 5,
              name: "BeatTheBush",
              showName: "BeatTheBush",
              audienceSize: "390K",
              niche: "Personal Finance",
              youtubeUrl: "https://www.youtube.com/@BeatTheBush",
              cpm: "$7.80",
              rpm: "$5.90",
              engagement: 7,
              contentQuality: 7,
              growthPotential: 6,
              productionValue: 6,
              brandFit: 7,
              notes: "Finance tips and tricks"
            },
            // Technology & Gadget Reviews
            {
              id: 6,
              name: "Kevin Powell",
              showName: "Kevin Powell",
              audienceSize: "997K",
              niche: "Technology",
              youtubeUrl: "https://www.youtube.com/@KevinPowell",
              cpm: "$6.50",
              rpm: "$4.80",
              engagement: 8,
              contentQuality: 9,
              growthPotential: 8,
              productionValue: 8,
              brandFit: 8,
              notes: "CSS and web development"
            },
            {
              id: 7,
              name: "TechMeOut",
              showName: "TechMeOut",
              audienceSize: "398K",
              niche: "Technology",
              youtubeUrl: "https://www.youtube.com/@Techmeout",
              cpm: "$5.90",
              rpm: "$4.20",
              engagement: 7,
              contentQuality: 7,
              growthPotential: 7,
              productionValue: 7,
              brandFit: 7,
              notes: "Tech reviews and tutorials"
            },
            {
              id: 8,
              name: "Premiere Gal",
              showName: "Premiere Gal",
              audienceSize: "593K",
              niche: "Technology",
              youtubeUrl: "https://www.youtube.com/@PremiereGal",
              cpm: "$6.80",
              rpm: "$5.10",
              engagement: 8,
              contentQuality: 8,
              growthPotential: 7,
              productionValue: 8,
              brandFit: 8,
              notes: "Video editing tutorials"
            },
            {
              id: 9,
              name: "The Future Tech",
              showName: "The Future Tech",
              audienceSize: "696K",
              niche: "Technology",
              youtubeUrl: "https://www.youtube.com/channel/UC17Uwo5BkSTtGVbOkywJ7_Q",
              cpm: "$7.20",
              rpm: "$5.50",
              engagement: 8,
              contentQuality: 7,
              growthPotential: 8,
              productionValue: 7,
              brandFit: 8,
              notes: "Future tech trends"
            },
            // Digital Marketing & Affiliate Marketing
            {
              id: 10,
              name: "Pat Flynn",
              showName: "Pat Flynn",
              audienceSize: "480K",
              niche: "Digital Marketing",
              youtubeUrl: "https://www.youtube.com/@patflynn",
              cpm: "$11.20",
              rpm: "$9.10",
              engagement: 9,
              contentQuality: 9,
              growthPotential: 7,
              productionValue: 8,
              brandFit: 9,
              notes: "Passive income expert"
            },
            {
              id: 11,
              name: "Marcus Campbell",
              showName: "Marcus Campbell",
              audienceSize: "273K",
              niche: "Affiliate Marketing",
              youtubeUrl: "https://www.youtube.com/@affiliatemarketingdude",
              cpm: "$8.90",
              rpm: "$6.70",
              engagement: 7,
              contentQuality: 7,
              growthPotential: 6,
              productionValue: 6,
              brandFit: 7,
              notes: "Affiliate marketing strategies"
            },
            {
              id: 12,
              name: "H-Educate",
              showName: "H-Educate",
              audienceSize: "1M",
              niche: "Digital Marketing",
              youtubeUrl: "https://www.youtube.com/@hasanaboulhasan",
              cpm: "$9.50",
              rpm: "$7.30",
              engagement: 8,
              contentQuality: 8,
              growthPotential: 8,
              productionValue: 7,
              brandFit: 8,
              notes: "Marketing education"
            },
            {
              id: 13,
              name: "Matt Diggity",
              showName: "Matt Diggity",
              audienceSize: "172K",
              niche: "Digital Marketing",
              youtubeUrl: "https://www.youtube.com/@MattDiggity",
              cpm: "$10.80",
              rpm: "$8.60",
              engagement: 8,
              contentQuality: 9,
              growthPotential: 8,
              productionValue: 7,
              brandFit: 8,
              notes: "SEO and digital marketing"
            },
            {
              id: 14,
              name: "Adrian Brambila",
              showName: "Adrian Brambila",
              audienceSize: "148K",
              niche: "Affiliate Marketing",
              youtubeUrl: "https://www.youtube.com/@brambilabong",
              cpm: "$8.20",
              rpm: "$6.10",
              engagement: 7,
              contentQuality: 7,
              growthPotential: 7,
              productionValue: 6,
              brandFit: 7,
              notes: "Side hustle content"
            },
            // Business & Entrepreneurship
            {
              id: 15,
              name: "Gillian Perkins",
              showName: "Gillian Perkins",
              audienceSize: "730K",
              niche: "Business",
              youtubeUrl: "https://www.youtube.com/@gillianzperkins",
              cpm: "$9.80",
              rpm: "$7.50",
              engagement: 8,
              contentQuality: 8,
              growthPotential: 7,
              productionValue: 8,
              brandFit: 8,
              notes: "Online business strategies"
            },
            {
              id: 16,
              name: "Goal 90",
              showName: "Goal 90",
              audienceSize: "484K",
              niche: "Entrepreneurship",
              youtubeUrl: "https://www.youtube.com/@Goal_90",
              cpm: "$7.60",
              rpm: "$5.80",
              engagement: 7,
              contentQuality: 7,
              growthPotential: 7,
              productionValue: 6,
              brandFit: 7,
              notes: "Entrepreneurship content"
            },
            // Health & Fitness
            {
              id: 17,
              name: "Eleni Fit",
              showName: "Eleni Fit",
              audienceSize: "2.26M",
              niche: "Health & Fitness",
              youtubeUrl: "https://www.youtube.com/@EleniFit",
              cpm: "$5.20",
              rpm: "$3.90",
              engagement: 8,
              contentQuality: 8,
              growthPotential: 7,
              productionValue: 8,
              brandFit: 8,
              notes: "Fitness and wellness"
            },
            {
              id: 18,
              name: "Ben Parkes",
              showName: "Ben Parkes",
              audienceSize: "315K",
              niche: "Health & Fitness",
              youtubeUrl: "https://www.youtube.com/@BenParkes",
              cpm: "$4.80",
              rpm: "$3.50",
              engagement: 7,
              contentQuality: 8,
              growthPotential: 7,
              productionValue: 7,
              brandFit: 7,
              notes: "Running channel"
            },
            {
              id: 19,
              name: "Diana Ruiz",
              showName: "Diana Ruiz",
              audienceSize: "351K",
              niche: "Health & Fitness",
              youtubeUrl: "https://www.youtube.com/@dianaruiz",
              cpm: "$5.10",
              rpm: "$3.80",
              engagement: 7,
              contentQuality: 7,
              growthPotential: 7,
              productionValue: 7,
              brandFit: 7,
              notes: "Fitness content creator"
            },
            // Real Estate
            {
              id: 20,
              name: "BiggerPockets",
              showName: "BiggerPockets",
              audienceSize: "1.25M",
              niche: "Real Estate",
              youtubeUrl: "https://www.youtube.com/@biggerpockets",
              cpm: "$13.50",
              rpm: "$11.20",
              engagement: 8,
              contentQuality: 9,
              growthPotential: 7,
              productionValue: 8,
              brandFit: 9,
              notes: "Leading real estate education"
            },
            {
              id: 21,
              name: "Kris Krohn",
              showName: "Kris Krohn",
              audienceSize: "1.12M",
              niche: "Real Estate",
              youtubeUrl: "https://www.youtube.com/channel/UCokIq0eihRhkiqClyV0WCdw",
              cpm: "$11.80",
              rpm: "$9.50",
              engagement: 8,
              contentQuality: 7,
              growthPotential: 7,
              productionValue: 7,
              brandFit: 8,
              notes: "Real estate investing"
            },
            {
              id: 22,
              name: "Jerry Norton",
              showName: "Jerry Norton",
              audienceSize: "540K",
              niche: "Real Estate",
              youtubeUrl: "https://www.youtube.com/@FlippingMastery",
              cpm: "$12.20",
              rpm: "$10.10",
              engagement: 7,
              contentQuality: 8,
              growthPotential: 7,
              productionValue: 7,
              brandFit: 8,
              notes: "House flipping strategies"
            },
            {
              id: 23,
              name: "Phil Pustejovsky",
              showName: "Phil Pustejovsky",
              audienceSize: "324K",
              niche: "Real Estate",
              youtubeUrl: "https://www.youtube.com/@freedom_mentor",
              cpm: "$10.90",
              rpm: "$8.80",
              engagement: 7,
              contentQuality: 7,
              growthPotential: 6,
              productionValue: 6,
              brandFit: 7,
              notes: "Real estate investing education"
            },
            {
              id: 24,
              name: "Ken McElroy",
              showName: "Ken McElroy",
              audienceSize: "506K",
              niche: "Real Estate",
              youtubeUrl: "https://www.youtube.com/@KenMcElroy",
              cpm: "$12.80",
              rpm: "$10.50",
              engagement: 8,
              contentQuality: 8,
              growthPotential: 7,
              productionValue: 7,
              brandFit: 8,
              notes: "Commercial real estate expert"
            },
            // Food & Cooking
            {
              id: 25,
              name: "Simply Quinoa",
              showName: "Simply Quinoa",
              audienceSize: "512K",
              niche: "Food & Cooking",
              youtubeUrl: "https://www.youtube.com/@Simplyquinoa",
              cpm: "$6.20",
              rpm: "$4.60",
              engagement: 7,
              contentQuality: 8,
              growthPotential: 6,
              productionValue: 8,
              brandFit: 7,
              notes: "Healthy cooking content"
            },
            // Beauty & Fashion
            {
              id: 26,
              name: "Malvika Sitlani",
              showName: "Malvika Sitlani",
              audienceSize: "837K",
              niche: "Beauty & Fashion",
              youtubeUrl: "https://www.youtube.com/@malvikasitlaniofficial",
              cpm: "$7.40",
              rpm: "$5.60",
              engagement: 8,
              contentQuality: 8,
              growthPotential: 7,
              productionValue: 8,
              brandFit: 8,
              notes: "Beauty and lifestyle"
            },
            {
              id: 27,
              name: "Roshni Bhatia",
              showName: "Roshni Bhatia",
              audienceSize: "567K",
              niche: "Beauty & Fashion",
              youtubeUrl: "https://www.youtube.com/@RoshniBhatia",
              cpm: "$6.90",
              rpm: "$5.20",
              engagement: 7,
              contentQuality: 7,
              growthPotential: 7,
              productionValue: 7,
              brandFit: 7,
              notes: "Beauty and fashion"
            },
            // Educational Content
            {
              id: 28,
              name: "Science Max",
              showName: "Science Max",
              audienceSize: "520K",
              niche: "Educational",
              youtubeUrl: "https://www.youtube.com/@ScienceMax",
              cpm: "$5.50",
              rpm: "$4.10",
              engagement: 7,
              contentQuality: 8,
              growthPotential: 7,
              productionValue: 7,
              brandFit: 7,
              notes: "Science education"
            },
            {
              id: 29,
              name: "Josh Horton",
              showName: "Josh Horton",
              audienceSize: "2.07M",
              niche: "Educational",
              youtubeUrl: "https://www.youtube.com/@jugglinjosh",
              cpm: "$4.90",
              rpm: "$3.60",
              engagement: 7,
              contentQuality: 8,
              growthPotential: 6,
              productionValue: 7,
              brandFit: 7,
              notes: "Juggling tutorials"
            },
            {
              id: 30,
              name: "Tiago Forte",
              showName: "Tiago Forte",
              audienceSize: "374K",
              niche: "Educational",
              youtubeUrl: "https://www.youtube.com/@TiagoForte",
              cpm: "$8.70",
              rpm: "$6.90",
              engagement: 8,
              contentQuality: 9,
              growthPotential: 8,
              productionValue: 7,
              brandFit: 8,
              notes: "Productivity education"
            },
            // Personal Development
            {
              id: 31,
              name: "Lisa Bilyeu",
              showName: "Lisa Bilyeu",
              audienceSize: "1.54M",
              niche: "Personal Development",
              youtubeUrl: "https://www.youtube.com/@LisaBilyeu",
              cpm: "$9.30",
              rpm: "$7.40",
              engagement: 8,
              contentQuality: 9,
              growthPotential: 7,
              productionValue: 8,
              brandFit: 9,
              notes: "Empowerment and growth"
            },
            {
              id: 32,
              name: "Cajun Koi Academy",
              showName: "Cajun Koi Academy",
              audienceSize: "1.34M",
              niche: "Personal Development",
              youtubeUrl: "https://www.youtube.com/@KoiAcademy",
              cpm: "$7.10",
              rpm: "$5.40",
              engagement: 8,
              contentQuality: 8,
              growthPotential: 7,
              productionValue: 7,
              brandFit: 8,
              notes: "Art and creativity"
            },
            {
              id: 33,
              name: "Mathew Encina",
              showName: "Mathew Encina",
              audienceSize: "522K",
              niche: "Personal Development",
              youtubeUrl: "https://www.youtube.com/@MatthewEncina",
              cpm: "$8.40",
              rpm: "$6.50",
              engagement: 8,
              contentQuality: 9,
              growthPotential: 8,
              productionValue: 8,
              brandFit: 8,
              notes: "Creative business development"
            },
            {
              id: 34,
              name: "Elizabeth Filips",
              showName: "Elizabeth Filips",
              audienceSize: "987K",
              niche: "Personal Development",
              youtubeUrl: "https://www.youtube.com/@elizabethfilips",
              cpm: "$7.80",
              rpm: "$6.00",
              engagement: 9,
              contentQuality: 9,
              growthPotential: 8,
              productionValue: 8,
              brandFit: 9,
              notes: "Study and productivity"
            },
            {
              id: 35,
              name: "Rewirs",
              showName: "Rewirs",
              audienceSize: "2.85M",
              niche: "Personal Development",
              youtubeUrl: "https://www.youtube.com/@Rewirs",
              cpm: "$6.50",
              rpm: "$4.90",
              engagement: 9,
              contentQuality: 8,
              growthPotential: 7,
              productionValue: 8,
              brandFit: 8,
              notes: "Over range but notable"
            },
            // Current Events Commentary
            {
              id: 36,
              name: "Langley Outdoors Academy",
              showName: "Langley Outdoors Academy",
              audienceSize: "720K",
              niche: "Current Events",
              youtubeUrl: "https://www.youtube.com/@LangleyOutdoors",
              cpm: "$6.80",
              rpm: "$5.10",
              engagement: 7,
              contentQuality: 7,
              growthPotential: 7,
              productionValue: 7,
              brandFit: 7,
              notes: "Current events commentary"
            }
          ];

      useEffect(() => {
        const savedTalents = localStorage.getItem('podcastTalents');
        const savedWeights = localStorage.getItem('podcastWeights');
        
        if (savedTalents) {
          try {
            const loaded = JSON.parse(savedTalents);
            // Add CPM/RPM fields if they don't exist
            const updated = loaded.map(t => ({
              ...t,
              cpm: t.cpm || '',
              rpm: t.rpm || ''
            }));
            setTalents(updated);
          } catch (e) {
            console.error('Error loading talents', e);
            setTalents(getDefaultTalents());
          }
        } else {
          setTalents(getDefaultTalents());
        }
        
        if (savedWeights) {
          try {
            setWeights(JSON.parse(savedWeights));
          } catch (e) {
            console.error('Error loading weights', e);
          }
        }
      }, []);

      const resetToDefaults = () => {
        if (confirm('This will reset all data to the default talent list. Are you sure?')) {
          const defaults = getDefaultTalents();
          setTalents(defaults);
          localStorage.setItem('podcastTalents', JSON.stringify(defaults));
        }
      };

      useEffect(() => {
        try {
          localStorage.setItem('podcastTalents', JSON.stringify(talents));
        } catch (e) {
          console.error('Error saving talents', e);
        }
      }, [talents]);

      useEffect(() => {
        try {
          localStorage.setItem('podcastWeights', JSON.stringify(weights));
        } catch (e) {
          console.error('Error saving weights', e);
        }
      }, [weights]);

      const calculateScore = (talent) => {
        return (
          (talent.engagement * weights.engagement +
           talent.contentQuality * weights.contentQuality +
           talent.growthPotential * weights.growthPotential +
           talent.productionValue * weights.productionValue +
           talent.brandFit * weights.brandFit) / 100
        ).toFixed(2);
      };

      // Helper function to parse dollar values
      const parseDollarValue = (str) => {
        if (!str) return 0;
        return parseFloat(str.replace(/[$,]/g, '')) || 0;
      };

      // Categorize CPM/RPM into tranches
      const getRevenueTrancheLabel = (talent) => {
        const cpm = parseDollarValue(talent.cpm);
        const rpm = parseDollarValue(talent.rpm);
        const avgRevenue = (cpm + rpm) / 2;
        
        // Define tranches based on average of CPM and RPM
        if (avgRevenue >= 9) return 'high';
        if (avgRevenue >= 6) return 'medium';
        return 'low';
      };

      const sortedTalents = useMemo(() => {
        // Filter by search query (searches name, niche, CPM, RPM)
        let filtered = talents;
        if (searchQuery.trim() !== '') {
          const query = searchQuery.toLowerCase();
          filtered = talents.filter(t => {
            // Check name and niche
            const nameMatch = t.name.toLowerCase().includes(query);
            const nicheMatch = t.niche.toLowerCase().includes(query);
            const cpmMatch = t.cpm && t.cpm.toLowerCase().includes(query);
            const rpmMatch = t.rpm && t.rpm.toLowerCase().includes(query);
            
            return nameMatch || nicheMatch || cpmMatch || rpmMatch;
          });
          
          // Prioritize name matches - sort so name matches come first
          filtered.sort((a, b) => {
            const aNameMatch = a.name.toLowerCase().includes(query);
            const bNameMatch = b.name.toLowerCase().includes(query);
            if (aNameMatch && !bNameMatch) return -1;
            if (!aNameMatch && bNameMatch) return 1;
            return 0;
          });
        }

        // Filter by revenue tranche
        if (revenueFilter !== 'all') {
          filtered = filtered.filter(t => {
            const tranche = getRevenueTrancheLabel(t);
            return tranche === revenueFilter;
          });
        }

        // Calculate scores and sort by selected criteria
        const sorted = filtered.map(t => {
          const copy = {};
          for (let key in t) {
            copy[key] = t[key];
          }
          copy.score = parseFloat(calculateScore(t));
          return copy;
        });

        // Only apply secondary sorting if not searching, or if sorting is explicitly changed
        if (!searchQuery.trim() || sortBy !== 'score') {
          sorted.sort((a, b) => {
            if (sortBy === 'score') return b.score - a.score;
            if (sortBy === 'name') return a.name.localeCompare(b.name);
            if (sortBy === 'niche') return a.niche.localeCompare(b.niche);
            if (sortBy === 'revenue') {
              // Sort by revenue tranche: high > medium > low
              const trancheOrder = { 'high': 3, 'medium': 2, 'low': 1 };
              const aTranche = getRevenueTrancheLabel(a);
              const bTranche = getRevenueTrancheLabel(b);
              const diff = trancheOrder[bTranche] - trancheOrder[aTranche];
              // If same tranche, sort by actual average revenue value
              if (diff === 0) {
                const aAvg = (parseDollarValue(a.cpm) + parseDollarValue(a.rpm)) / 2;
                const bAvg = (parseDollarValue(b.cpm) + parseDollarValue(b.rpm)) / 2;
                return bAvg - aAvg;
              }
              return diff;
            }
            return 0;
          });
        }

        return sorted;
      }, [talents, weights, sortBy, searchQuery, revenueFilter]);

      const addTalent = () => {
        if (newTalent.name && newTalent.showName) {
          const talentToAdd = {};
          for (let key in newTalent) {
            talentToAdd[key] = newTalent[key];
          }
          talentToAdd.id = Date.now();
          
          const updatedTalents = talents.slice();
          updatedTalents.push(talentToAdd);
          setTalents(updatedTalents);
          
          setNewTalent({
            name: '',
            showName: '',
            audienceSize: '',
            niche: '',
            youtubeUrl: '',
            cpm: '',
            rpm: '',
            engagement: 5,
            contentQuality: 5,
            growthPotential: 5,
            productionValue: 5,
            brandFit: 5,
            notes: ''
          });
          setShowAddForm(false);
        }
      };

      const deleteTalent = (id) => {
        if (confirm('Are you sure you want to delete this talent?')) {
          setTalents(talents.filter(t => t.id !== id));
        }
      };

      const updateWeight = (key, value) => {
        const newWeights = {};
        for (let k in weights) {
          newWeights[k] = weights[k];
        }
        newWeights[key] = value;
        setWeights(newWeights);
      };

      const updateNewTalent = (field, value) => {
        const updated = {};
        for (let key in newTalent) {
          updated[key] = newTalent[key];
        }
        updated[field] = value;
        setNewTalent(updated);
      };

      const getScoreColor = (score) => {
        if (score >= 8) return 'text-emerald-700 bg-emerald-50 border border-emerald-200';
        if (score >= 6) return 'text-amber-700 bg-amber-50 border border-amber-200';
        return 'text-rose-700 bg-rose-50 border border-rose-200';
      };

      const getRankMedal = (index) => {
        if (index === 0) return 'ðŸ¥‡';
        if (index === 1) return 'ðŸ¥ˆ';
        if (index === 2) return 'ðŸ¥‰';
        return '#' + (index + 1);
      };

      return h('div', { className: 'min-h-screen p-4 md:p-6' },
        h('div', { className: 'max-w-7xl mx-auto' },
          // Header
          h('div', { className: 'bg-gradient-to-br from-cyan-600 to-blue-700 rounded-xl shadow-xl p-6 md:p-8 mb-6 text-white' },
            h('div', { className: 'flex items-center justify-between mb-4 flex-wrap gap-4' },
              h('div', { className: 'flex items-center gap-3' },
                h(AwardIcon),
                h('div', null,
                  h('h1', { className: 'text-3xl md:text-4xl font-bold' },
                    'Talent Ranker'
                  ),
                  h('p', { className: 'text-cyan-50 mt-1 text-sm md:text-base' }, 
                    'Evaluate and rank podcast acquisitions'
                  )
                )
              ),
              h('div', { className: 'flex gap-2' },
                h('button', {
                  onClick: () => setShowAddForm(!showAddForm),
                  className: 'bg-white text-cyan-700 px-4 py-2 rounded-lg hover:bg-cyan-50 transition font-semibold flex items-center gap-2 shadow-lg border-2 border-white'
                },
                  h(PlusIcon),
                  'Add Talent'
                ),
                h('button', {
                  onClick: resetToDefaults,
                  className: 'bg-white/20 text-white px-4 py-2 rounded-lg hover:bg-white/30 transition font-semibold border-2 border-white/40'
                },
                  'Reset to Defaults'
                )
              )
            ),

            // Weights section
            h('div', { className: 'bg-white/20 rounded-lg p-4 mt-6' },
              h('h3', { className: 'font-semibold mb-3 text-lg' }, 'Criteria Weights (%)'),
              h('div', { className: 'grid grid-cols-2 md:grid-cols-5 gap-4' },
                Object.keys(weights).map(key =>
                  h('div', { key: key },
                    h('label', { className: 'text-sm text-cyan-50 capitalize block mb-1' },
                      key.replace(/([A-Z])/g, ' $1').trim()
                    ),
                    h('input', {
                      type: 'number',
                      min: '0',
                      max: '100',
                      value: weights[key],
                      onChange: (e) => updateWeight(key, parseInt(e.target.value) || 0),
                      className: 'w-full px-3 py-2 border border-white/30 rounded-lg bg-white/90 text-gray-900 placeholder-gray-400 focus:bg-white focus:outline-none focus:ring-2 focus:ring-cyan-300'
                    })
                  )
                )
              ),
              h('div', { className: 'mt-2 text-sm text-cyan-50' },
                'Total: ' + Object.values(weights).reduce((a, b) => a + b, 0) + '%',
                Object.values(weights).reduce((a, b) => a + b, 0) !== 100 &&
                  h('span', { className: 'text-yellow-300 ml-2 font-semibold' }, 'âš  Should equal 100%')
              )
            )
          ),

          // Add form
          showAddForm && h('div', { className: 'bg-white rounded-xl shadow-lg p-6 mb-6 border-2 border-cyan-600' },
            h('h3', { className: 'font-bold text-gray-800 mb-4 text-xl' },
              'Add New Talent'
            ),
            h('div', { className: 'grid grid-cols-1 md:grid-cols-2 gap-4 mb-4' },
              h('input', {
                type: 'text',
                placeholder: 'Name',
                value: newTalent.name,
                onChange: (e) => updateNewTalent('name', e.target.value),
                className: 'px-3 py-2 border-2 border-slate-300 rounded-lg focus:border-cyan-600 focus:outline-none'
              }),
              h('input', {
                type: 'text',
                placeholder: 'Show Name',
                value: newTalent.showName,
                onChange: (e) => updateNewTalent('showName', e.target.value),
                className: 'px-3 py-2 border-2 border-slate-300 rounded-lg focus:border-cyan-600 focus:outline-none'
              }),
              h('input', {
                type: 'text',
                placeholder: 'Audience Size (e.g., 50K)',
                value: newTalent.audienceSize,
                onChange: (e) => updateNewTalent('audienceSize', e.target.value),
                className: 'px-3 py-2 border-2 border-slate-300 rounded-lg focus:border-cyan-600 focus:outline-none'
              }),
              h('input', {
                type: 'text',
                placeholder: 'Niche',
                value: newTalent.niche,
                onChange: (e) => updateNewTalent('niche', e.target.value),
                className: 'px-3 py-2 border-2 border-slate-300 rounded-lg focus:border-cyan-600 focus:outline-none'
              }),
              h('input', {
                type: 'text',
                placeholder: 'CPM (e.g., $8.50)',
                value: newTalent.cpm,
                onChange: (e) => updateNewTalent('cpm', e.target.value),
                className: 'px-3 py-2 border-2 border-slate-300 rounded-lg focus:border-cyan-600 focus:outline-none'
              }),
              h('input', {
                type: 'text',
                placeholder: 'RPM (e.g., $6.20)',
                value: newTalent.rpm,
                onChange: (e) => updateNewTalent('rpm', e.target.value),
                className: 'px-3 py-2 border-2 border-slate-300 rounded-lg focus:border-cyan-600 focus:outline-none'
              }),
              h('input', {
                type: 'url',
                placeholder: 'YouTube URL',
                value: newTalent.youtubeUrl,
                onChange: (e) => updateNewTalent('youtubeUrl', e.target.value),
                className: 'px-3 py-2 border-2 border-slate-300 rounded-lg md:col-span-2 focus:border-cyan-600 focus:outline-none'
              })
            ),
            h('div', { className: 'grid grid-cols-2 md:grid-cols-5 gap-4 mb-4' },
              ['engagement', 'contentQuality', 'growthPotential', 'productionValue', 'brandFit'].map(field =>
                h('div', { key: field },
                  h('label', { className: 'text-sm text-gray-600 capitalize block mb-1 font-semibold' },
                    field.replace(/([A-Z])/g, ' $1').trim() + ' (1-10)'
                  ),
                  h('input', {
                    type: 'number',
                    min: '1',
                    max: '10',
                    value: newTalent[field],
                    onChange: (e) => updateNewTalent(field, parseInt(e.target.value) || 1),
                    className: 'w-full px-3 py-2 border-2 border-slate-300 rounded-lg focus:border-cyan-600 focus:outline-none'
                  })
                )
              )
            ),
            h('textarea', {
              placeholder: 'Notes',
              value: newTalent.notes,
              onChange: (e) => updateNewTalent('notes', e.target.value),
              className: 'w-full px-3 py-2 border-2 border-slate-300 rounded-lg mb-4 focus:border-cyan-600 focus:outline-none',
              rows: '2'
            }),
            h('div', { className: 'flex gap-2' },
              h('button', {
                onClick: addTalent,
                className: 'bg-emerald-600 text-white px-6 py-2 rounded-lg hover:bg-emerald-700 transition font-semibold shadow-md'
              }, 'Add Talent'),
              h('button', {
                onClick: () => setShowAddForm(false),
                className: 'bg-slate-300 text-slate-700 px-6 py-2 rounded-lg hover:bg-slate-400 transition font-semibold'
              }, 'Cancel')
            )
          ),

          // Search and sort controls
          h('div', { className: 'bg-white rounded-xl shadow-lg p-4 mb-6' },
            h('div', { className: 'flex flex-col md:flex-row items-stretch md:items-center gap-4' },
              h('div', { className: 'relative flex-1' },
                h('div', { className: 'absolute left-3 top-1/2 transform -translate-y-1/2 text-cyan-600' },
                  h(SearchIcon)
                ),
                h('input', {
                  type: 'text',
                  placeholder: 'Search by name (also searches niche, CPM, RPM)...',
                  value: searchQuery,
                  onChange: (e) => setSearchQuery(e.target.value),
                  className: 'w-full pl-10 pr-10 py-3 border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 focus:outline-none'
                }),
                searchQuery && h('button', {
                  onClick: () => setSearchQuery(''),
                  className: 'absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 text-xl'
                }, 'âœ•')
              ),
              h('div', { className: 'flex items-center gap-2' },
                h('span', { className: 'text-gray-700 font-semibold whitespace-nowrap' }, 'Sort by:'),
                h('select', {
                  value: sortBy,
                  onChange: (e) => setSortBy(e.target.value),
                  className: 'px-4 py-3 border-2 border-slate-300 rounded-lg font-semibold focus:border-cyan-600 focus:outline-none'
                },
                  h('option', { value: 'score' }, 'Score (Highest First)'),
                  h('option', { value: 'name' }, 'Name (A-Z)'),
                  h('option', { value: 'niche' }, 'Niche'),
                  h('option', { value: 'revenue' }, 'Revenue (High to Low)')
                )
              )
            ),

            h('div', { className: 'mt-4 flex items-center gap-2 flex-wrap' },
              h('span', { className: 'text-sm font-semibold text-gray-700' }, 'Revenue Filter:'),
              h('button', {
                onClick: () => setRevenueFilter('all'),
                className: 'px-4 py-2 rounded-lg font-semibold text-sm transition ' + (revenueFilter === 'all' ? 'bg-cyan-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300')
              }, 'All'),
              h('button', {
                onClick: () => setRevenueFilter('high'),
                className: 'px-4 py-2 rounded-lg font-semibold text-sm transition ' + (revenueFilter === 'high' ? 'bg-purple-600 text-white' : 'bg-purple-100 text-purple-700 hover:bg-purple-200')
              }, 'High (â‰¥$9)'),
              h('button', {
                onClick: () => setRevenueFilter('medium'),
                className: 'px-4 py-2 rounded-lg font-semibold text-sm transition ' + (revenueFilter === 'medium' ? 'bg-yellow-600 text-white' : 'bg-yellow-100 text-yellow-700 hover:bg-yellow-200')
              }, 'Medium ($6-9)'),
              h('button', {
                onClick: () => setRevenueFilter('low'),
                className: 'px-4 py-2 rounded-lg font-semibold text-sm transition ' + (revenueFilter === 'low' ? 'bg-slate-600 text-white' : 'bg-slate-200 text-slate-700 hover:bg-slate-300')
              }, 'Low (<$6)')
            ),

            searchQuery && h('div', { className: 'mt-3 text-sm text-gray-600 font-medium' },
              'Showing ' + sortedTalents.length + ' of ' + talents.length + ' talents'
            ),
            
            revenueFilter !== 'all' && !searchQuery && h('div', { className: 'mt-3 text-sm text-gray-600 font-medium' },
              'Showing ' + sortedTalents.length + ' ' + revenueFilter + ' revenue talents'
            )
          ),

          // Talent cards
          h('div', { className: 'space-y-4' },
            sortedTalents.map((talent, index) =>
              h('div', { key: talent.id, className: 'bg-white rounded-xl shadow-lg p-6 card-hover' },
                h('div', { className: 'flex items-start justify-between mb-4 gap-4' },
                  h('div', { className: 'flex items-start gap-4 flex-1' },
                    h('div', { className: 'text-2xl md:text-3xl font-bold text-slate-400 min-w-[60px]' },
                      getRankMedal(index)
                    ),
                    h('div', { className: 'flex-1 min-w-0' },
                      h('div', { className: 'flex items-center gap-3 mb-2 flex-wrap' },
                        h('h2', { className: 'text-xl md:text-2xl font-bold text-slate-800' }, talent.name),
                        h('span', { className: 'px-3 py-1 rounded-full text-sm font-bold ' + getScoreColor(talent.score) },
                          'Score: ' + talent.score + '/10'
                        )
                      ),
                      h('div', { className: 'flex items-center gap-4 text-sm md:text-base text-gray-600 mb-3 flex-wrap' },
                        h('span', { className: 'font-semibold text-slate-700' }, talent.showName),
                        h('span', { className: 'flex items-center gap-1' },
                          h(UsersIcon),
                          talent.audienceSize
                        ),
                        h('span', { className: 'px-2 py-1 bg-cyan-100 text-cyan-800 rounded font-semibold text-sm border border-cyan-200' },
                          talent.niche
                        )
                      ),
                      // Revenue metrics
                      (talent.cpm || talent.rpm) && h('div', { className: 'flex items-center gap-4 mb-3 flex-wrap' },
                        talent.cpm && h('span', { className: 'flex items-center gap-1 text-sm bg-emerald-50 px-3 py-1 rounded-lg border border-emerald-200' },
                          h(DollarIcon),
                          h('span', { className: 'font-semibold text-emerald-700' }, 'CPM: ' + talent.cpm)
                        ),
                        talent.rpm && h('span', { className: 'flex items-center gap-1 text-sm bg-blue-50 px-3 py-1 rounded-lg border border-blue-200' },
                          h(DollarIcon),
                          h('span', { className: 'font-semibold text-blue-700' }, 'RPM: ' + talent.rpm)
                        ),
                        (talent.cpm || talent.rpm) && (() => {
                          const tranche = getRevenueTrancheLabel(talent);
                          const colors = {
                            'high': 'bg-purple-100 text-purple-700 border-purple-300',
                            'medium': 'bg-yellow-100 text-yellow-700 border-yellow-300',
                            'low': 'bg-slate-100 text-slate-700 border-slate-300'
                          };
                          return h('span', { className: 'px-3 py-1 rounded-lg border text-xs font-bold uppercase ' + colors[tranche] },
                            tranche + ' revenue'
                          );
                        })()
                      ),
                      // YouTube link
                      talent.youtubeUrl && h('a', {
                        href: talent.youtubeUrl,
                        target: '_blank',
                        rel: 'noopener noreferrer',
                        className: 'inline-flex items-center gap-2 text-red-600 hover:text-red-700 font-semibold text-sm mb-3 hover:underline'
                      },
                        h(YoutubeIcon),
                        'View YouTube Channel',
                        h(ExternalLinkIcon)
                      ),
                      talent.notes && h('p', { className: 'text-gray-600 text-sm italic mt-2' }, talent.notes)
                    )
                  ),
                  h('button', {
                    onClick: () => deleteTalent(talent.id),
                    className: 'text-red-500 hover:text-red-700 transition flex-shrink-0 hover:scale-110'
                  }, h(TrashIcon))
                ),

                h('div', { className: 'border-t border-gray-200 my-4' }),

                // Scoring bars
                h('div', { className: 'grid grid-cols-2 md:grid-cols-5 gap-4' },
                  ['engagement', 'contentQuality', 'growthPotential', 'productionValue', 'brandFit'].map(field =>
                    h('div', { key: field },
                      h('div', { className: 'flex items-center justify-between mb-1' },
                        h('label', { className: 'text-xs text-gray-600 capitalize font-semibold' },
                          field.replace(/([A-Z])/g, ' $1').trim()
                        ),
                        h('span', { className: 'text-xs font-bold text-cyan-700' }, talent[field] + '/10')
                      ),
                      h('div', { className: 'h-2.5 bg-slate-200 rounded-full overflow-hidden' },
                        h('div', {
                          className: 'h-full bg-gradient-to-r from-cyan-500 to-blue-600 transition-all',
                          style: { width: (talent[field] / 10 * 100) + '%' }
                        })
                      )
                    )
                  )
                )
              )
            )
          ),

          // Empty states
          sortedTalents.length === 0 && talents.length > 0 && h('div', { className: 'bg-white rounded-xl shadow-lg p-12 text-center border-2 border-cyan-600' },
            h('p', { className: 'text-gray-500 text-lg' }, 'No talents match your search. Try different keywords.')
          ),

          talents.length === 0 && h('div', { className: 'bg-white rounded-xl shadow-lg p-12 text-center border-2 border-cyan-600' },
            h('p', { className: 'text-gray-500 text-lg' }, 'No talent added yet. Click "Add Talent" to get started!')
          )
        )
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('app'));
    root.render(h(App));
  </script>
</body>
</html>
